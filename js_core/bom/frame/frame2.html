<html>
<head>
    <script language="javascript" type="text/javascript">
        var url = "http://domain1.com/frame1.html";
        var oldHash = null;
        var timer = null;
        function getHash() {
            var hash = window.location.hash;
            if ((hash.length >= 1) && (hash.charAt(0) == '#')){
                hash = hash.substring(1);
            }
            return hash;
        }

        function sendRequest(){
            var d = document;
            var t = d.getElementById('request');
            var f = parent;
            // console.log(f.document);
            f.location.href = url + "#" + t.value + "=?" + new Date().getTime();
        }

        function setDivHtml(v)
        {
            var d = document;
            var dv = d.getElementById('response');
            dv.innerHTML = v;
        }

        function idle()
        {
            var newHash = getHash();
            if (newHash != oldHash)
            {
                setDivHtml(newHash);
                oldHash = newHash;
            }
            timer = window.setTimeout(idle, 100);
        }

        function onload()
        {
            timer = window.setTimeout(idle, 100);
        }
    </script>
</head>
<body onload="onload();">
send: <input type="text" id="request"> <input type="button" value="send" onclick="sendRequest()" /><br/>
reply: <div id="response"></div>
</body>
</html>